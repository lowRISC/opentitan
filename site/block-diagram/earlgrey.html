<!--
Copyright lowRISC contributors.
Licensed under the Apache License, Version 2.0, see LICENSE for details.
SPDX-License-Identifier: Apache-2.0
-->

<link href="/css/block_diagram.css" rel="stylesheet">
<script src="/js/block_diagram.js"></script>
<script>
// Append tooltips to each block on window load.
window.onload = (event) => {
    const blocks = document.querySelectorAll("#earlgrey-block-diagram .block");
    loadTooltips("/reports/earlgrey-stats.json", blocks);
}
</script>

<div class="scroll-container" style="width: 100%; overflow-x: auto">
<figure class="block-diagram" id="earlgrey-block-diagram">
    <figcaption><b>OpenTitan Earlgrey ASIC</b></figcaption>
    <a href="https://opentitan.org/book/hw/top_earlgrey/doc/specification.html">ðŸ“‹ <b>Datasheet</b></a>
    <div class="top">
        <div class="domains" grid="2">
            <div class="domain">
                <h3 class="domain-title">High speed domain</h3>
                <div class="blocks" grid="4">
                    <a class="block clock1 dual" href="https://opentitan.org/book/hw/ip/rv_core_ibex/" id="ibex" grid-rows="2" grid-cols="2">
                        <span class="dual-label">DUAL LOCKSTEP</span>
                        <span class="big-label">Ibex Core</span> (RV32IMCB)
                    </a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/top_earlgrey/ip_autogen/rv_plic/" id="interrupt-controller">Interrupt Controller</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/rom_ctrl/" id="rom">ROM</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/rv_dm/" id="debug-module">Debug Module</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/sram_ctrl/" id="main-sram">Main<br>SRAM</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/tlul/" id="high-speed-crossbar" grid-cols="4">TL-UL<br>Crossbar</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/keymgr/" id="key-manager">Key Manager</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/kmac/" id="kmac">KMAC</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/edn/" id="edn">EDN</a>
                    <a class="block clock2" href="https://opentitan.org/book/hw/ip/spi_host/" id="spi-host-0">SPI<br>Host 0</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/otbn/" id="otbn">OTBN</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/hmac/" id="hmac">HMAC</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/csrng/" id="csrng">CSRNG</a>
                    <a class="block clock3" href="https://opentitan.org/book/hw/ip/spi_host/" id="spi-host-1">SPI<br>Host 1</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/aes/" id="aes">AES</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/flash_ctrl/" id="flash">Flash</a>
                    <a class="block clock1" href="https://opentitan.org/book/hw/ip/entropy_src/" id="entropy-source">Entropy Source</a>
                    <a class="block clock3" href="https://opentitan.org/book/hw/ip/usbdev/" id="usb" subclock1="clock5">USB</a>
                    <div class="arrow column" arrow-x="1" arrow-y="2" arrow-length="2" arrow-span="2"></div>
                    <div class="arrow column" arrow-x="3" arrow-y="1" arrow-length="3"></div>
                    <div class="arrow column" arrow-x="4" arrow-y="1" arrow-length="3"></div>
                    <div class="arrow column" arrow-x="1" arrow-y="3" arrow-length="4"></div>
                    <div class="arrow column" arrow-x="2" arrow-y="3" arrow-length="4"></div>
                    <div class="arrow column" arrow-x="3" arrow-y="3" arrow-length="4"></div>
                    <div class="arrow column" arrow-x="4" arrow-y="3" arrow-length="4"></div>
                    <div class="arrow row" arrow-x="4" arrow-y="3" arrow-length="1" arrow-layers="2"></div>
                </div>
            </div>
            <div class="domain">
                <h3 class="domain-title">Peripheral domain</h3>
                <div class="blocks" grid="4">
                    <a class="block clock4" href="https://opentitan.org/book/hw/ip/tlul/" id="peripheral-crossbar" grid-rows="6">TL-UL Crossbar</a>
                    <a class="block clock4" href="https://opentitan.org/book/hw/ip/otp_ctrl/" id="otp-fuse-controller">OTP (Fuse) Controller</a>
                    <a class="block clock4" href="https://opentitan.org/book/hw/ip/lc_ctrl/" id="life-cycle">Life<br>Cycle</a>
                    <a class="block clock4" href="https://opentitan.org/book/hw/top_earlgrey/ip_autogen/alert_handler/" id="alert-handler">Alert Handler</a>
                    <a class="block clock4" href="https://opentitan.org/book/hw/ip/uart/" id="uart">4 x UART</a>
                    <a class="block clock4" href="https://opentitan.org/book/hw/ip/rv_timer/" id="timers">Timers</a>
                    <a class="block clock4" href="https://opentitan.org/book/hw/ip/gpio/" id="gpio">GPIO</a>
                    <a class="block clock4" href="https://opentitan.org/book/hw/ip/i2c/" id="i2c"><span>3 x I<sup>2</sup>C</span></a>
                    <a class="block clock4" href="https://opentitan.org/book/hw/ip/spi_device/" id="spi-device" subclock1="clock1">SPI<br>Device</a>
                    <a class="block clock4" href="https://opentitan.org/book/hw/ip/pattgen/" id="pattern-generators">Pattern Generators</a>
                    <div class="domain always-on" grid-rows="3" grid-cols="3" id="interior-aon-domain">
                        <h3 class="domain-title">Always-on domain</h3>
                        <div class="blocks" grid="3">
                            <a class="block clock4" href="https://opentitan.org/book/hw/ip/pwm/" id="pwm" subclock1="clock5">PWM</a>
                            <a class="block clock4" href="https://opentitan.org/book/hw/ip/sram_ctrl/" id="retention-sram">Retention SRAM</a>
                            <a class="block clock4" href="https://opentitan.org/book/hw/ip/pwrmgr/" id="power-manager" subclock1="clock5">Power Manager</a>
                            <a class="block clock4" href="https://opentitan.org/book/hw/ip/sysrst_ctrl/" id="sysrst-controller" subclock1="clock5">Sysrst Controller</a>
                            <a class="block clock4" href="https://opentitan.org/book/hw/ip/aon_timer/" id="aon-timers" subclock1="clock5">AON<br>Timers</a>
                            <a class="block clock4" href="https://opentitan.org/book/hw/ip/clkmgr/" id="clkrst-managers" subclock1="clock5">Clk/Rst Managers</a>
                            <a class="block clock4" href="https://opentitan.org/book/hw/ip/pinmux/" id="pinmux-padctrl">Pinmux / Padctrl</a>
                            <a class="block clock4" href="https://opentitan.org/book/hw/ip/adc_ctrl/" id="adc-controller" subclock1="clock5">ADC Controller</a>
                            <a class="block clock4" href="https://opentitan.org/book/hw/top_earlgrey/ip/sensor_ctrl/" id="sensor-control" subclock1="clock5">Sensor Control</a>
                            <div class="arrow row" arrow-x="0" arrow-y="1" arrow-length="4"></div>
                            <div class="arrow row" arrow-x="0" arrow-y="2" arrow-length="4"></div>
                            <div class="arrow row" arrow-x="0" arrow-y="3" arrow-length="4"></div>
                            <div class="arrow column" arrow-x="1" arrow-y="3" arrow-length="1" arrow-layers="3"></div>
                            <div class="arrow column" arrow-x="2" arrow-y="3" arrow-length="1" arrow-layers="3"></div>
                            <div class="arrow-group">
                                <div class="arrow column" arrow-x="3" arrow-y="3" arrow-length="1" arrow-layers="3"></div>
                                <div class="arrow column" arrow-x="3" arrow-y="2" arrow-length="3" arrow-layers="3"></div>
                                <div class="arrow column" arrow-x="3" arrow-y="1" arrow-length="4" arrow-layers="3"></div>
                            </div>
                        </div>
                    </div>
                    <div class="arrow row" arrow-x="1" arrow-y="1" arrow-length="4"></div>
                    <div class="arrow row" arrow-x="1" arrow-y="2" arrow-length="4"></div>
                    <div class="arrow row" arrow-x="1" arrow-y="3" arrow-length="4"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="domain always-on">
        <div class="blocks" grid="4">
            <a class="block clock6" href="https://opentitan.org/book/hw/top_earlgrey/ip/pinmux/doc/autogen/pinout_asic.html" id="padring" grid-cols="3">Padring (only wire and pad instances)</a>
            <a class="block clock4" href="https://opentitan.org/book/hw/top_earlgrey/ip/ast/" id="analog-sensor-top" subclock1="clock3" subclock2="clock5">Analog Sensor Top</a>
            <div class="arrow row" arrow-x="3" arrow-y="1" arrow-length="2"></div>
        </div>
    </div>
    <div class="clocks">
        <div class="clock clock1">~100 MHz</div>
        <div class="clock clock2">96 MHz</div>
        <div class="clock clock3">48 MHz</div>
        <div class="clock clock4">24 HMz</div>
        <div class="clock clock5">200 kHz</div>
        <div class="clock clock6">Logic Only</div>
    </div>
</figure>
</div>

<!-- Specific stylings for this diagram -->
<style>
#interior-aon-domain {
    /* Merge this AON domain into the exterior */
    border-bottom: calc(var(--aon-width) + 1px) solid var(--diagram-bg);
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    padding-bottom: calc(2.0 * var(--padding) + var(--gap) + var(--aon-width));
    margin-bottom: calc(-2.0 * var(--padding) - var(--gap) - var(--aon-width));
}

#high-speed-crossbar {
    /* Boost high speed crossbar to fill remaining space */
    height: calc(2.5em + 1rem);
}
</style>
