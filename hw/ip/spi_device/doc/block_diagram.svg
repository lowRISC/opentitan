<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="671px" height="683px" viewBox="-0.5 -0.5 671 683" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="88" y="462" width="520" height="220" rx="26.4" ry="26.4" fill="none" stroke="#999999" stroke-width="2" stroke-dasharray="6 6" pointer-events="all"/><g fill="#999999" font-family="Helvetica" font-weight="bold" text-anchor="end" font-size="12px"><text x="602.5" y="656.5">TPM</text></g><rect x="88" y="22" width="340" height="430" rx="20.4" ry="20.4" fill="none" stroke="#999999" stroke-width="2" stroke-dasharray="6 6" pointer-events="all"/><rect x="128" y="72" width="280" height="240" rx="19.2" ry="19.2" fill="none" stroke="#999999" stroke-width="2" stroke-dasharray="6 6" pointer-events="all"/><g fill="#999999" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="133.5" y="304">Flash</text></g><rect x="138" y="102" width="110" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="192.5" y="126.5">CMDPARSE</text></g><rect x="288" y="82" width="110" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="342.5" y="106.5">Status</text></g><rect x="288" y="132" width="110" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="342.5" y="156.5">JEDEC</text></g><rect x="288" y="182" width="110" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="342.5" y="206.5">Read</text></g><rect x="288" y="232" width="110" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="342.5" y="256.5">Upload</text></g><path d="M 268 262 L 268 92" fill="none" stroke="rgb(0, 0, 0)" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><rect x="438" y="2" width="120" height="280" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="3" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="497.5" y="270.5">DPSRAM</text></g><path d="M 498 282 L 498 2" fill="none" stroke="#3d85c6" stroke-width="3" stroke-miterlimit="10" stroke-dasharray="9 9" pointer-events="stroke"/><rect x="198" y="332" width="110" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="252.5" y="356.5">CMD FILTER</text></g><rect x="198" y="382" width="110" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="252.5" y="406.5">ADDR/PAYLOAD</text></g><path d="M 418 272 L 418 182" fill="none" stroke="rgb(0, 0, 0)" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 578 152 L 578 2" fill="none" stroke="rgb(0, 0, 0)" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><rect x="158" y="482" width="110" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="212.5" y="506.5">TPM_CMD</text></g><rect x="328" y="532" width="110" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="382.5" y="556.5">Write FIFO / Buffer</text></g><rect x="438" y="2" width="60" height="20" fill="none" stroke="none" pointer-events="all"/><g fill="#3d85c6" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="467.5" y="19.5">SPI</text></g><rect x="438" y="22" width="60" height="20" fill="none" stroke="none" pointer-events="all"/><g fill="#3d85c6" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="467.5" y="36.5">clk</text></g><rect x="498" y="2" width="60" height="20" fill="none" stroke="none" pointer-events="all"/><g fill="#3d85c6" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="527.5" y="19.5">bus</text></g><rect x="498" y="22" width="60" height="20" fill="none" stroke="none" pointer-events="all"/><g fill="#3d85c6" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="527.5" y="36.5">clk</text></g><rect x="128" y="322" width="290" height="120" rx="14.4" ry="14.4" fill="none" stroke="#999999" stroke-width="2" stroke-dasharray="6 6" pointer-events="all"/><g fill="#999999" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="131.5" y="436.5">Passthrough</text></g><path d="M 648 42 L 586.24 42" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 580.24 42 L 588.24 38 L 586.24 42 L 588.24 46 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="623" y="38.5">SW</text></g><path d="M 343 272 L 343 302 L 608 302 L 608 122 L 586.24 122" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 580.24 122 L 588.24 118 L 586.24 122 L 588.24 126 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 8 41 L 109.76 41" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 115.76 41 L 107.76 45 L 109.76 41 L 107.76 37 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g fill="#666666" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="20.5" y="35.5">/CS</text></g><g fill="#666666" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="19.5" y="55.5">Flash</text></g><path d="M 118 402 L 118 62" fill="none" stroke="#666666" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 58 622 L 58 62" fill="none" stroke="#666666" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 118 182 L 58 182" fill="none" stroke="#666666" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><g fill="#666666" font-family="Helvetica" font-weight="bold" text-anchor="end" font-size="12px"><text x="50.5" y="185">SPI Host</text></g><path d="M 8 642 L 119.76 642" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 125.76 642 L 117.76 646 L 119.76 642 L 117.76 638 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g fill="#666666" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="24.5" y="636.5">/CS</text></g><g fill="#666666" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="20.5" y="656.5">TPM</text></g><path d="M 193 142 L 193 172 L 146.24 172" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 140.24 172 L 148.24 168 L 146.24 172 L 148.24 176 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g fill="#990000" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="193" y="185.5">intercept</text></g><path d="M 328 482 L 388 482 L 388 522 L 328 522" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 378 522 L 378 482" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 368 522 L 368 482" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 358 522 L 358 482" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348 522 L 348 482" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><rect x="328" y="632" width="110" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="382.5" y="656.5">Return-by-HW</text></g><rect x="328" y="582" width="110" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="382.5" y="606.5">Read FIFO / Buffer</text></g><path d="M 568 572 L 628 572 L 628 82 L 586.24 82" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 580.24 82 L 588.24 78 L 586.24 82 L 588.24 86 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 288 662 L 288 592" fill="none" stroke="#666666" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 288 612 L 66.24 612" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 60.24 612 L 68.24 608 L 66.24 612 L 68.24 616 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g fill="#666666" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="97.5" y="605.5">MISO</text></g><path d="M 58 502 L 149.76 502" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 155.76 502 L 147.76 506 L 149.76 502 L 147.76 498 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g fill="#666666" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="97.5" y="495.5">MOSI</text></g><path d="M 398 502 L 479.76 502" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 485.76 502 L 477.76 506 L 479.76 502 L 477.76 498 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="401.5" y="495.5">CMD / ADDR</text></g><path d="M 568 622 L 568 552 L 568 532" fill="none" stroke="rgb(0, 0, 0)" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 448 552 L 549.76 552" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 555.76 552 L 547.76 556 L 549.76 552 L 547.76 548 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="481.5" y="545.5">WrData</text></g><path d="M 558 602 L 456.24 602" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 450.24 602 L 458.24 598 L 456.24 602 L 458.24 606 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="481.5" y="595.5">RdData</text></g><path d="M 308 352 L 623 352 C 623 345.5 633 345.5 633 352 L 633 352 L 649.76 352" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 655.76 352 L 647.76 356 L 649.76 352 L 647.76 348 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="637.5" y="346.5">SCK</text></g><g fill="#000000" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="637.5" y="366.5">/CS</text></g><path d="M 308 402 L 623 401.55 C 622.99 395.05 632.99 395.04 633 401.54 L 633 401.54 L 649.76 401.51" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 655.76 401.5 L 647.77 405.51 L 649.76 401.51 L 647.76 397.51 Z" fill="#000000" stroke="#000000" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="637.5" y="396.32">SPI</text></g><g fill="#000000" font-family="Helvetica" font-weight="bold" font-size="12px"><text x="638.5" y="416.41">Flash</text></g></g></svg>